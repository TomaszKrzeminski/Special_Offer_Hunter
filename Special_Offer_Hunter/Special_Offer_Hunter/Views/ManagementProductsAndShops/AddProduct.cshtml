@model AddNewProductViewModel
@{
    ViewData["Title"] = "AddProduct";
    Layout = "_LayoutAuto";
}

<div class="container">

    <div class="row">
        <div class="col col-lg-2">

        </div>
        <div class="col col-lg-8">
            <div id="ScanBarCode" class="row">
                <div class="col col-lg-12">
                    <h1>Dodaj Produkt</h1>
                </div>


                <div class="col-md-6" style="padding-top:50px;">
                    <div class="panel panel-default">
                        <div class="panel-heading"></div>
                        <div class="panel-body">
                            <div id="LiveCamera" style="margin-bottom:50px;"></div>
                            <form>
                                <input id="CaptureSnapshot" type="button" class="btn btn-primary" value="Zrób zdjęcie kodu">
                            </form>

                        </div>
                    </div>
                </div>
                <div class="col-md-6" style="padding-top:50px;">
                    <div class="panel panel-default">
                        <div class="panel-heading"></div>
                        <div class="panel-body">
                            <div id="results">Twój kod pojawi się tutaj</div>
                        </div>
                        <div class="col col-md-12">
                            <div style="max-width:320px;" id="BarcodeResult"></div>
                        </div>
                        <div class="col col-md-12">
                            <input id="SearchProductByFoundBarCode" class="btn btn-success" value="Poszukaj produktu" />
                        </div>

                        <br />
                        <br />
                    </div>
                </div>

                <div class="col col-md-12">




                    <form asp-action="AddProduct" asp-controller="ManagementProductsAndShops" method="post">

                        <div class="col col-lg-12">
                            <label class="font-weight-bold">Nazwa</label>
                            <input class="form-control" asp-for="Name" />
                        </div>
                        <div class="col col-lg-12">
                            <label class="font-weight-bold">Cena</label>
                            <input class="form-control" asp-for="Price" />
                        </div>
                        <div class="col col-lg-12">
                            <label class="font-weight-bold">Opis</label>
                            <input id="DescriptionR" class="form-control" asp-for="Description" />
                        </div>
                        <div class="col col-lg-12">
                            <label class="font-weight-bold">Waga</label>
                            <input class="form-control" asp-for="Weight" />
                        </div>
                        <div class="col col-lg-12">
                            <label class="font-weight-bold">Rozmiar</label>
                            <input class="form-control" asp-for="Height" />
                        </div>
                        <div class="col col-lg-12">
                            <h2>Zdjęcie</h2>
                        </div>
                        <div class="col col-lg-12">
                            <label class="font-weight-bold">Kategoria</label>
                            <input class="form-control" asp-for="Category" />
                            @*<input class="form-control" asp-for="CategoryId" />*@
                        </div>
                        <div class="col col-lg-12">
                            <label class="font-weight-bold">Kod kreskowy</label>
                            <input id="BarCodeR" class="form-control" asp-for="Barcode" />
                        </div>
                        <div class="col col-lg-12">
                            <label class="font-weight-bold">Firma</label>
                            <input id="CompanyR" class="form-control" asp-for="Company" />
                            @*<input class="form-control" asp-for="CompanyId" />*@
                        </div>
                        <div class="col col-lg-12">
                            <label class="font-weight-bold">Sklep</label>
                            <input class="form-control" asp-for="Shop" />
                            <input class="form-control" asp-for="ShopId" />
                        </div>
                        <div class="col col-lg-12">

                            <input class="btn btn-success" type="submit" value="Dodaj" />
                        </div>
                    </form>











                </div>








            </div>








        </div>
        <div class="col col-lg-2">

        </div>
    </div>
</div>








@section Scripts
{



<script>


    $(document).ready(function () {


       


        $('#BarcodeResult').on('DOMSubtreeModified', function () {

            setTimeout(function () {


                var barcodeVal = $(this).find('#GetBarCode').val();


                var code = $('#BarCodeProductDS').val();
                var descripton = $('#DescriptionProductDS').val();
                var company = $('#BrandProductDS').val();

                $('#BarCodeR').val(code);
                $('#DescriptionR').val(descripton);
                $('#CompanyR').val(company);


               

            }, 1000);





        });

    });
</script>


   
   




    <script src="~/webcamjs/webcam.js"></script>
    <script>







        Webcam.set({
            width: 320,
            height: 240,
            image_format: 'jpeg',
            jpeg_quality: 90
        });


        Webcam.attach('#LiveCamera');





        function CaptureSnapshot() {
            Webcam.snap(function (data) {
                // display results in page
                document.getElementById('results').innerHTML = '<img src="' + data + '"/>';
                // Send image data to the controller to store locally or in database
                Webcam.upload(data,
                    '/BarCode/CaptureImage',
                    function (code, text) {

                        $('#BarcodeResult').empty();
                        $('#BarcodeResult').html(text);








                    });
            });



        }

        $('#ScanBarCode').on('click', '#CaptureSnapshot', function () {

            CaptureSnapshot();







        });










    </script>














}



