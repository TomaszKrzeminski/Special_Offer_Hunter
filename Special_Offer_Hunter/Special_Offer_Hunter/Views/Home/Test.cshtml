@model ProductLocationViewModel



<html class='use-all-space'>
<head>
    <meta http-equiv='X-UA-Compatible' content='IE=Edge' />
    <meta charset='UTF-8'>
    <title>Maps SDK for Web - Vector map</title>
    <meta name='viewport'
          content='width=device-width,initial-scale=1,maximum-scale=1,user-scalable=no' />
    @*<link rel='stylesheet' type='text/css' href='https://api.tomtom.com/maps-sdk-for-web/cdn/6.x/6.15.0/maps/maps.css'>*@

</head>
<body>
    <div style="width:500px; height:500px;" id='map' class='map'></div>
    <div style="display: none; visibility: hidden;">
        <img id="MyPosition" src="~/AppPictures/MyPosition.png" />
    </div>
    <input id="myTomTomKey" type="hidden" value="@ViewData["MyTomTomKey"]" />
    <input id="myPositionLat" type="hidden" value="@ViewData["MyPositionLat"]" />
    <input id="myPositionLon" type="hidden" value="@ViewData["MyPositionLon"]" />
    <input id="Shops" type="hidden" value="@Model.listPlaces" />

    <script>
        let myTomTomKey = document.getElementById('myTomTomKey').value;
        let myPLat = document.getElementById('myPositionLat').value;
        let myPLong = document.getElementById('myPositionLon').value;

        var HQ = { lat: myPLat, lng: myPLong }
        var map = tt.map({
            key: myTomTomKey,
            container: 'map',
            center: HQ,
            zoom: 10

        });
        map.addControl(new tt.FullscreenControl());
        map.addControl(new tt.NavigationControl());

        var places = document.getElementById('Shops').value;
        //let Places = JSON.parse(places).Places;
        let Places = JSON.parse(places);


        for (var i = 0; i < Places.length; i++) {

            let place = Places[i];

            var marker = new tt.Marker().setLngLat(place.center).addTo(map);

            var popupOffsets = {

                bottom: [0, -40]

            }

            var popup = new tt.Popup({ offset: popupOffsets }).setHTML(place.name);

            marker.setPopup(popup);

        }

                    //var companyAssets = [
                    //    { lat: 53.41102649310047, lng: 18.45159994044702 },
                    //    { lat: 53.405802665117776, lng: 18.43686231527983 },
                    //    { lat: 53.4071954558253, lng: 18.42734439274037 }

                    //];
                    //companyAssets.forEach(function (child) {
                    //    new tt.Marker().setLngLat(child).addTo(map);
                    //});







    </script>
</body>
</html>